<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>åŸºäºTypeScriptçš„PixiJSå¼€å‘ç¯å¢ƒè®¾ç½®ï¼ˆwebpackç¯‡ï¼‰ | LimboNova</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="/index.xml">Subscribe</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">åŸºäºTypeScriptçš„PixiJSå¼€å‘ç¯å¢ƒè®¾ç½®ï¼ˆwebpackç¯‡ï¼‰</span></h1>

<h2 class="date">2017/09/21</h2>
</div>

<main>
<p>å‰å‡ å¤©å†™äº†ä¸€ç¯‡<a href="http://www.limbonova.com/2017/09/setup-pixijs-with-typescript-using-browserify">ç”¨<code>Browserify</code>æ‰“åŒ…çš„ PixiJS çš„å¼€å‘ç¯å¢ƒé…ç½®æµç¨‹</a>ï¼Œä½†æ˜¯WebæŠ€æœ¯ä¸€æ—¥åƒé‡Œï¼Œå¼€å‘å·¥å…·ä¹Ÿæ—¥æ–°æœˆå¼‚ï¼Œ Webpack å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚æœ¬æ–‡ä»‹ç»äº†ä»¥ TypeScript ä½œä¸ºå¼€å‘è¯­è¨€ï¼Œ PixiJS ä½œä¸ºå›¾å½¢æ¸²æŸ“å¼•æ“ï¼Œ Webpack ä½œä¸ºæ¨¡å—æ‰“åŒ…å·¥å…·çš„å¼€å‘ç¯å¢ƒçš„é…ç½®è¿‡ç¨‹ï¼Œéµå¾ªç®€åŒ–æ˜“ç”¨çš„åŸåˆ™ï¼Œçœç•¥äº†ä¸€äº›éå¿…è¦æ¨¡å—çš„å®‰è£…ã€‚</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<h3 id="é¡¹ç›®ç»“æ„">é¡¹ç›®ç»“æ„</h3>
<ol>
<li>åˆ›å»ºé¡¹ç›®ç›®å½•</li>
</ol>
<pre><code>mkdir ts_pixi
cd ts_pixi
mkdir assets src dist
</code></pre><ol start="2">
<li>æ–°å»ºé¡¹ç›®æ–‡ä»¶</li>
</ol>
<pre><code>touch index.html
touch src/main.ts
</code></pre><ol start="3">
<li>åˆå§‹åŒ–é¡¹ç›®</li>
</ol>
<pre><code>npm init
</code></pre><h3 id="å®‰è£…æ¨¡å—">å®‰è£…æ¨¡å—</h3>
<ol>
<li>PixiJS</li>
</ol>
<pre><code>npm install --save-dev pixi.js
</code></pre><ol start="2">
<li>TypeScriptï¼Œå¦‚æœä½¿ç”¨Visual Studio Codeä½œä¸ºIDEï¼Œå¯ä»¥å®‰è£…ç›¸åº”<code>@types</code>æ–‡ä»¶ï¼Œç”¨äºä»£ç æç¤ºç­‰åŠŸèƒ½ã€‚</li>
</ol>
<pre><code>npm install --save-dev typescript @types/pixi.js @types/node
</code></pre><ol start="3">
<li>å…¶å®ƒ</li>
</ol>
<pre><code>npm install --save-dev ts-loader webpack webpack-dev-server
</code></pre><ul>
<li><code>ts-loader</code> TypeScriptåŠ è½½å™¨ï¼Œ ç”¨äºå¤„ç† TypeScript æ–‡ä»¶ã€‚</li>
<li><code>webpack</code> æ¨¡å—åŠ æ‰“åŒ…å™¨ï¼Œå°†JavaScript æ–‡ä»¶æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ‰“åŒ…åçš„æ–‡ä»¶ç”¨äºåœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚</li>
<li><code>webpack-dev-server</code> webpackæä¾›çš„ç®€æ˜“æœåŠ¡å™¨ï¼Œç”¨äºè¿è¡Œè°ƒè¯•ã€‚ä¹Ÿå¯ä»¥é€‰æ‹©å®‰è£…<code>http-server</code>æˆ–è€…<code>live-server</code>ï¼›</li>
</ul>
<h3 id="åˆå§‹åŒ–æ¨¡å—">åˆå§‹åŒ–æ¨¡å—</h3>
<p>ç”Ÿæˆ tsconfig.json</p>
<pre><code>node_modules/.bin/tsc --init
</code></pre><h2 id="è®¾ç½®">è®¾ç½®</h2>
<h3 id="packagejson-è®¾ç½®">package.json è®¾ç½®</h3>
<p>é…ç½®scriptsä¸­çš„æ„å»ºå’Œæµ‹è¯•å‘½ä»¤ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;ts_pixi&#34;</span>,
  <span style="color:#f92672">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;1.0.0&#34;</span>,
  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
  <span style="color:#f92672">&#34;main&#34;</span>: <span style="color:#e6db74">&#34;index.html&#34;</span>,
  <span style="color:#f92672">&#34;scripts&#34;</span>: {
    <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;node_modules/.bin/webpack-dev-server&#34;</span>,
    <span style="color:#f92672">&#34;build&#34;</span>: <span style="color:#e6db74">&#34;node_modules/.bin/webpack&#34;</span>,
    <span style="color:#f92672">&#34;build:watch&#34;</span>: <span style="color:#e6db74">&#34;node_modules/.bin/webpack -w&#34;</span>,
    <span style="color:#f92672">&#34;clean&#34;</span>: <span style="color:#e6db74">&#34;rm ./dist/*&#34;</span>
  },
  <span style="color:#f92672">&#34;author&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
  <span style="color:#f92672">&#34;license&#34;</span>: <span style="color:#e6db74">&#34;ISC&#34;</span>,
  <span style="color:#f92672">&#34;dependencies&#34;</span>: {
    <span style="color:#f92672">&#34;pixi.js&#34;</span>: <span style="color:#e6db74">&#34;^4.5.6&#34;</span>
  },
  <span style="color:#f92672">&#34;devDependencies&#34;</span>: {
    <span style="color:#f92672">&#34;@types/node&#34;</span>: <span style="color:#e6db74">&#34;^8.0.29&#34;</span>,
    <span style="color:#f92672">&#34;@types/pixi.js&#34;</span>: <span style="color:#e6db74">&#34;^4.5.4&#34;</span>,
    <span style="color:#f92672">&#34;source-map-loader&#34;</span>: <span style="color:#e6db74">&#34;^0.2.1&#34;</span>,
    <span style="color:#f92672">&#34;ts-loader&#34;</span>: <span style="color:#e6db74">&#34;^2.3.7&#34;</span>,
    <span style="color:#f92672">&#34;typescript&#34;</span>: <span style="color:#e6db74">&#34;^2.5.2&#34;</span>,
    <span style="color:#f92672">&#34;webpack&#34;</span>: <span style="color:#e6db74">&#34;^3.6.0&#34;</span>,
    <span style="color:#f92672">&#34;webpack-dev-server&#34;</span>: <span style="color:#e6db74">&#34;^2.8.2&#34;</span>
  }
}
</code></pre></div><h3 id="tsconfigjson-è®¾ç½®">tsconfig.json è®¾ç½®</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;compilerOptions&#34;</span>: {
    <span style="color:#f92672">&#34;strictNullChecks&#34;</span>: <span style="color:#66d9ef">true</span>,
    <span style="color:#f92672">&#34;noImplicitAny&#34;</span>: <span style="color:#66d9ef">true</span>,
    <span style="color:#f92672">&#34;outDir&#34;</span>: <span style="color:#e6db74">&#34;./dist/&#34;</span>,
    <span style="color:#f92672">&#34;sourceMap&#34;</span>: <span style="color:#66d9ef">true</span>,
    <span style="color:#f92672">&#34;target&#34;</span>: <span style="color:#e6db74">&#34;es5&#34;</span>
  },
  <span style="color:#f92672">&#34;filesGlob&#34;</span>: [
    <span style="color:#e6db74">&#34;./src/*.ts&#34;</span>
  ]
}
</code></pre></div><h3 id="webpackconfigjs-è®¾ç½®">webpack.config.js è®¾ç½®</h3>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º<code>webpack.config.js</code>æ–‡ä»¶ï¼Œå¹¶åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">path</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;path&#34;</span>);
<span style="color:#a6e22e">module</span>.<span style="color:#a6e22e">exports</span> <span style="color:#f92672">=</span> {
    <span style="color:#a6e22e">entry</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;./src/main.ts&#34;</span>,
    <span style="color:#a6e22e">output</span><span style="color:#f92672">:</span> {
        <span style="color:#a6e22e">filename</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;./dist/bundle.js&#34;</span>
    },
    <span style="color:#75715e">// Enable sourcemaps for debugging webpack&#39;s output.
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">devtool</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;inline-source-map&#34;</span>,
    <span style="color:#a6e22e">resolve</span><span style="color:#f92672">:</span> {
        <span style="color:#75715e">// Add &#39;.ts&#39; as resolvable extensions.
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">extensions</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;.ts&#34;</span>, <span style="color:#e6db74">&#34;.js&#34;</span>]
    },
    <span style="color:#a6e22e">module</span><span style="color:#f92672">:</span> {
        <span style="color:#a6e22e">rules</span><span style="color:#f92672">:</span> [
            {
                <span style="color:#a6e22e">test</span><span style="color:#f92672">:</span> <span style="color:#e6db74">/\.ts$/</span>,
                <span style="color:#a6e22e">use</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;ts-loader&#34;</span>]
            }
        ]
    },
    <span style="color:#a6e22e">devServer</span><span style="color:#f92672">:</span> {
        <span style="color:#a6e22e">contentBase</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">path</span>.<span style="color:#a6e22e">join</span>(<span style="color:#a6e22e">__dirname</span>, <span style="color:#e6db74">&#34;.&#34;</span>),
        <span style="color:#a6e22e">compress</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>,
        <span style="color:#a6e22e">port</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">8080</span>
    },
    <span style="color:#75715e">// Omit &#34;externals&#34; if you don&#39;t have any. Just an example because it&#39;s
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// common to have them.
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">externals</span><span style="color:#f92672">:</span> {
        <span style="color:#75715e">// Don&#39;t bundle giant dependencies, instead assume they&#39;re available in
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// the html doc as global variables node module name -&gt; JS global
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// through which it is available
</span><span style="color:#75715e"></span>       <span style="color:#75715e">//&#34;pixi.js&#34;: &#34;PIXI&#34;
</span><span style="color:#75715e"></span>    }
};
</code></pre></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨vs code chrome debugæ’ä»¶è°ƒè¯•æ—¶ï¼Œ<code>devtool</code>éœ€è¦é…ç½®ä¸º<code>inline-source-map</code>ï¼Œå¦åˆ™æ–­ç‚¹å‘½ä¸­æœ‰é—®é¢˜ã€‚
å¦‚æœæœ‰äº›ç¬¬ä¸‰æ–¹çš„JSåº“è¾ƒå¤§,æ¯”å¦‚ PixiJSï¼Œå¯ä»¥è€ƒè™‘ä¸ç”¨<code>webpack</code>æ‰“åŒ…ï¼Œè€Œé€šè¿‡ HTML çš„<code>&lt;scrpt&gt;</code>æ ‡ç­¾ä»å¤–éƒ¨åŠ è½½ã€‚é‚£ä¹ˆå°±éœ€è¦åœ¨ <code>externals</code>é€‰é¡¹ä¸­å¯ç”¨ï¼Œå¹¶åœ¨htmlä¸­åŒ…å«å¯¹åº”çš„ JavaScript æ–‡ä»¶ã€‚</p>
<h2 id="æµ‹è¯•">æµ‹è¯•</h2>
<h3 id="ä¿®æ”¹æ–‡ä»¶">ä¿®æ”¹æ–‡ä»¶</h3>
<h4 id="maints">main.ts</h4>
<p>å†™ä¸€æ®µæµ‹è¯•ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-TypeScript" data-lang="TypeScript"><span style="color:#66d9ef">import</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">as</span> <span style="color:#a6e22e">PIXI</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;pixi.js&#34;</span>;

<span style="color:#75715e">//Create the renderer
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">renderer</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">PIXI</span>.<span style="color:#a6e22e">autoDetectRenderer</span>(<span style="color:#ae81ff">256</span>, <span style="color:#ae81ff">256</span>);

<span style="color:#75715e">//Add the canvas to the HTML document
</span><span style="color:#75715e"></span>document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">appendChild</span>(<span style="color:#a6e22e">renderer</span>.<span style="color:#a6e22e">view</span>);

<span style="color:#75715e">//Create a container object called the `stage`
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">stage</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">PIXI</span>.<span style="color:#a6e22e">Container</span>();

<span style="color:#75715e">//Tell the `renderer` to `render` the `stage`
</span><span style="color:#75715e"></span><span style="color:#a6e22e">renderer</span>.<span style="color:#a6e22e">render</span>(<span style="color:#a6e22e">stage</span>);
</code></pre></div><h4 id="indexhtml">index.html</h4>
<p>ä¿®æ”¹æ–‡ä»¶å†…å®¹ä¸º</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#f92672">html</span>&gt;
    &lt;<span style="color:#f92672">head</span>&gt;
        &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span> /&gt;
        &lt;<span style="color:#f92672">title</span>&gt;Hello World, Pixi!&lt;/<span style="color:#f92672">title</span>&gt;
    &lt;/<span style="color:#f92672">head</span>&gt;
    &lt;<span style="color:#f92672">body</span>&gt;
        &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./dist/bundle.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
    &lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><h3 id="ç¼–è¯‘æµ‹è¯•">ç¼–è¯‘æµ‹è¯•</h3>
<h4 id="ç¼–è¯‘">ç¼–è¯‘</h4>
<pre><code>npm run build
</code></pre><p>æ­¤ä¸¾å°†ä¼šæ‰§è¡Œ<code>package.json</code>ä¸­è®¾ç½®çš„<code>build</code>å‘½ä»¤ï¼Œç¼–è¯‘TypeScriptæ–‡ä»¶ï¼Œå¹¶æ‰“åŒ…è‡³<code>dist/bundle.js</code>ä¸­</p>
<h4 id="æµ‹è¯•-1">æµ‹è¯•</h4>
<pre><code>npm run start
</code></pre><p>æ‰§è¡Œå‘½ä»¤ï¼Œæ‰“å¼€ç›¸åº”çš„ç½‘å€ï¼Œæµ‹è¯•åˆšåˆšç¼–å†™çš„ä»£ç ï¼ŒæŸ¥çœ‹ä»£ç æ˜¯å¦æ­£ç¡®æ‰§è¡Œã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>Web æŠ€æœ¯æ›´æ–°å¾ˆå¿«ï¼ŒWebpack 3.6 å·²ç»å‘å¸ƒäº†ï¼Œ è€Œç½‘ä¸Šçš„å¾ˆå¤šèµ„æ–™è¿˜åœç•™åœ¨ 1.xï¼Œ 2.x çš„æ—¶ä»£ï¼ŒPixiJSä¹Ÿæ›´æ–°åˆ°äº† 4.5.6ï¼Œç¯å¢ƒé…ç½®ä¹Ÿä¸å†åƒä»¥å‰é‚£ä¹ˆå¤æ‚ã€‚ä½†æ˜¯ Web å‰ç«¯çš„å‘å±•å®åœ¨æ˜¯å¤ªå¿«ï¼Œé‡å¤é€ çš„â€œè½®å­â€ä¹Ÿæ˜¯èŠ±æ ·ç™¾å‡ºï¼Œè®©äººç›®ä¸æš‡æ¥ã€‚â€œè‹¥æ— å¿…è¦ï¼Œå‹¿å¢å®ä½“â€ï¼Œå¼•å…¥æ›´å¤šçš„æ¨¡å—ä¼šäº§ç”Ÿæ›´å¤šçš„é—®é¢˜ï¼Œå¦‚æœå°†æ¥é‡æ–°é…ç½®ç¯å¢ƒï¼Œå¯ä»¥è€ƒè™‘å°†<code>Webpack</code>ä¹Ÿå»æ‰ã€‚</p>
<hr>
<p><strong>å‚è€ƒèµ„æ–™</strong></p>
<ol>
<li><a href="http://www.proofbyexample.com/typescript-project-setup-with-npm.html">http://www.proofbyexample.com/typescript-project-setup-with-npm.html</a></li>
<li><a href="http://www.proofbyexample.com/typescript-pixi-webpack.html">http://www.proofbyexample.com/typescript-pixi-webpack.html</a></li>
<li><a href="https://gist.github.com/mjackson/ecd3914ebee934f4daf4">https://gist.github.com/mjackson/ecd3914ebee934f4daf4</a></li>
</ol>
</main>


<<<<<<< HEAD
<script src="https://utteranc.es/client.js"
        repo="anthonyhan/anthonyhan.github.io"
        issue-term="title"
        label="ğŸ’¬"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

=======
>>>>>>> fc94299128ee14a5e693c17e0e17562800d6a7a7
<footer>
  
  
  <hr/>
  Â© 2005-2021 Anthony | <a href="https://github.com/anthonyhan">Github</a> | <a href="https://twitter.com/antonius_hq">Twitter</a>
  
  </footer>
  
  </body>
</html>

