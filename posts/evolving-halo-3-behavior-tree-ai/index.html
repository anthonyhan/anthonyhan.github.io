<!DOCTYPE html>
<html><head lang="zh-cn">
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>《光环3》行为树AI的进化 - LimboNova</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="
这是2007年游戏开发者大会(GDC &lsquo;07)上的一篇演讲，Bungie Studios 的 Max Dyckhoff 介绍了从《光环2》到《光环3》，开发团队对其行为树 AI 系统所做的改进。
Stimulus Behaviors
问题： 在行为树每次更新时，很少触发的事件驱动行为也会检查。在一定程度上引起了不必要的性能消耗。
Halo 2： 将行为或冲动以动态或异步的方式添加到行为树的指定位置。" />
	<meta property="og:image" content=""/>
	
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SVMJ2LPT6E"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-SVMJ2LPT6E', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="《光环3》行为树AI的进化" />
<meta property="og:description" content="
这是2007年游戏开发者大会(GDC &lsquo;07)上的一篇演讲，Bungie Studios 的 Max Dyckhoff 介绍了从《光环2》到《光环3》，开发团队对其行为树 AI 系统所做的改进。
Stimulus Behaviors
问题： 在行为树每次更新时，很少触发的事件驱动行为也会检查。在一定程度上引起了不必要的性能消耗。
Halo 2： 将行为或冲动以动态或异步的方式添加到行为树的指定位置。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/evolving-halo-3-behavior-tree-ai/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-08T17:46:53+08:00" />
<meta property="article:modified_time" content="2020-07-08T17:46:53+08:00" />

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="《光环3》行为树AI的进化"/>
<meta name="twitter:description" content="
这是2007年游戏开发者大会(GDC &lsquo;07)上的一篇演讲，Bungie Studios 的 Max Dyckhoff 介绍了从《光环2》到《光环3》，开发团队对其行为树 AI 系统所做的改进。
Stimulus Behaviors
问题： 在行为树每次更新时，很少触发的事件驱动行为也会检查。在一定程度上引起了不必要的性能消耗。
Halo 2： 将行为或冲动以动态或异步的方式添加到行为树的指定位置。"/>
<script src="/js/feather.min.js"></script>
	
	
        <link href="/css/fonts.11a1877508139eac0b5b4852ceb110c35641b3533321e66e39149e901ed5756b.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="/css/main.d902908ac6e0fab67957de5db5aea1b6455b19ae2ca98eac4c95a4a0fdc02238.css" />
		<link id="darkModeStyle" rel="stylesheet" type="text/css" href="/css/dark.c95c5dcf5f32f8b67bd36f7dab66680e068fce2b303087294114aabf7a7c080b.css" media="(prefers-color-scheme: dark)"  />
	
	
	
	

	
	
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css">
		<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js"></script>
		<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
		
		
		<script>
			document.addEventListener("DOMContentLoaded", function() {
					renderMathInElement(document.body, {
							delimiters: [
									{left: "$$", right: "$$", display: true},
									{left: "$", right: "$", display: false}
							]
					});
			});
			</script>
	
	
	
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="/">LimboNova</a>
	</div>
	<nav>
		
		<a href="/">Home</a>
		
		<a href="/posts">Archives</a>
		
		<a href="/tags">Tags</a>
		
		<a href="/about">About</a>
		
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">《光环3》行为树AI的进化</h1>
			<div class="meta">Posted on Jul 8, 2020</div>
		</div>
		

		<section class="body">
			<p><img src="https://www.shuspectra.com/wp-content/uploads/2018/11/halo3.jpg" alt="halo 3"></p>
<p>这是2007年游戏开发者大会(GDC &lsquo;07)上的一篇演讲，Bungie Studios 的 Max Dyckhoff 介绍了从《光环2》到《光环3》，开发团队对其行为树 AI 系统所做的改进。</p>
<h2 id="stimulus-behaviors">Stimulus Behaviors</h2>
<p><strong>问题：</strong> 在行为树每次更新时，很少触发的事件驱动行为也会检查。在一定程度上引起了不必要的性能消耗。</p>
<p><strong>Halo 2：</strong> 将行为或冲动以动态或异步的方式添加到行为树的指定位置。</p>
<p><img src="/images/evolving-halo-3-behaviour-tree-ai/stimulus-behaviors.webp" alt="&ldquo;Halo 2: Stimulus Behaviors&rdquo;"></p>
<p><strong>新问题：</strong> Stimulus Behavior 增加了行为树的复杂度，使得调试更加困难，实现也更加棘手。</p>
<p><strong>Halo 3：</strong> 删减 Stimulus Behavior 功能，取而代之的是  _ “刺激激活(Stimulus Activation)” _ 的概念。当特定事件发生时，不必动态插入新行为，而是激活已经在行为树中预先定义好的行为。</p>
<p><img src="/images/evolving-halo-3-behaviour-tree-ai/stimulus-activation.webp" alt="&ldquo;Halo 3: Stimulus Activation&rdquo;"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>CHILD_ENTRY( &lt;behaviour_name&gt;, CHECK_STIMULUS( &lt;stimulus_name&gt;))
</span></span></code></pre></div><p>通过这种方式，行为树的结构保持静态不变，避免了动态插入带来的复杂性，同时通过刺激机制实现了相同的响应特定事件的功能。</p>
<h2 id="behavior-masks">Behavior Masks</h2>
<p><strong>问题：</strong> 在某项情况下，能够行为树移除指定的行为。
<strong>Halo 2：</strong> 使用 <em>”风格(Style)“</em>。可以给每个角色设置一种风格，设计师可以根据自己的需求来定制行为树中的行为。</p>
<p><strong>新问题：</strong></p>
<ul>
<li>Styles 机制给了设计师过高的自由度，导致行为树的复杂性增加且缺乏规范性，设计师无法透彻地理解整个行为树。</li>
<li>Styles 带来的行为调整过于细微和主观，难以被玩家所感知。</li>
</ul>
<p><strong>Halo 3：</strong> 使用 <em>”态度(Attitude)“</em> 概念替代自由度过高的 <em>”风格(Style)“</em>。比如 预设 ”胆小的“、”普通的“、”好斗的“ 不同态度，根据态度调整行为参数。</p>
<p>引入 <em>”抑制(Inhibition)“</em> 的概念来实现行为的自定义。</p>
<p><img src="/images/evolving-halo-3-behaviour-tree-ai/behavior-mask-inhibitions.webp" alt="&ldquo;Halo 3: Inhibitions&rdquo;"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>BEHAVIOUR( &lt;behaviour_name&gt;, INHIBIT( &lt;inhibition_name&gt; | &lt;inhibition_name_2&gt;))
</span></span></code></pre></div><h2 id="maintaining-knowledge">Maintaining Knowledge</h2>
<p><strong>Halo 2：</strong>  整理 AI 的知识，区分适合和不适合存储在行为树的数据。</p>
<ul>
<li>对目标的搜索状态 是持久性数据</li>
<li>AI角色的载具状态 是临时性数据。</li>
</ul>
<p><strong>新问题：</strong> 载具状态是临时的，导致行为被打断时，AI 会忘记载具状态，同时也难以和其它角色协作。</p>
<p><strong>Halo 3：</strong> 引入新概念：<em>”载具(vehicle)“</em>。</p>
<ul>
<li>载具(vehicle) 的数据结构存储在 Actor 上</li>
<li>使用专门的”连接“和”分离“冲动来控制载具状态的变化</li>
<li>添加&quot;进入&quot;和&quot;离开&quot;载具的行为</li>
</ul>
<p><strong>优点：</strong></p>
<ul>
<li>提高了系统的健壮性</li>
<li>提高了设计师的控制力</li>
<li>改善了与游戏脚本的集成</li>
</ul>
<h2 id="其它改进">其它改进</h2>
<h3 id="joint-behaviors">Joint Behaviors</h3>
<p>针对 AI 需要协作的问题，Halo 2 的解决办法是分发邀请给其它 Actor，邀请其参与 <em>联合行为 (Joint Behavior)</em> 。而 <strong>Halo 3</strong> 采用多重机制，引入新概念如”载具“和更高层的协作等，结合刺激行为实现了战斗过程中相互协调、配合的行为等等；</p>
<h3 id="arguments-to-behaviors">Arguments to Behaviors</h3>
<ul>
<li>为正在运行的行为增加一些上下文。以”掩护“为例，增加”掩护“的原因。</li>
<li>重用行为。在战斗后可以跳转到某些行为。</li>
</ul>
<h3 id="impulses-for-control">Impulses for Control</h3>
<ul>
<li>经常用 <em>”冲动(impulse)“</em> 控制角色的各个方面。比如，进入狂暴状态，开启光学迷彩，控制移动速度等等。结合 Behavior Masks，使得 <em>”冲动(impulse)“</em> 的功能非常强大。</li>
</ul>
<h2 id="总结">总结</h2>
<p>以前使用是一棵动态的行为树结构，现在则是一个通过大量&quot;掩码&quot;机制来控制的静态结构。同时也将一些概念移出了行为树，在保持设计灵活性和系统可维护性的同时，简化了系统结构。</p>
		</section>

		<br>
		<br>
		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/game-dev">game dev</a></li>
					
					<li><a href="/tags/game-ai">game ai</a></li>
					
					<li><a href="/tags/behavior-tree">behavior tree</a></li>
					
					<li><a href="/tags/halo">halo</a></li>
					
				</ul>
			</nav>
			
			
		</div>
		
		
<script src="https://utteranc.es/client.js"
        repo="anthonyhan/anthonyhan.github.io"
        issue-term="pathname"
        label="💬comment"
        theme="preferred-color-scheme"
        crossorigin="anonymous"
        async>
</script>
		
	</article>
</main>
<footer>
  <div style="display:flex"><a class="soc" href="https://github.com/anthonyhan" rel="me" title="GitHub"><i data-feather="github"></i></a>
    <a class="border"></a><a class="soc" href="https://twitter.com/_qhan_" rel="me" title="Twitter"><i data-feather="twitter"></i></a>
    <a class="border"></a><a class="soc" href="/index.xml" rel="me" title="Rss"><i data-feather="rss"></i></a>
    <a class="border"></a></div>
  <div class="footer-info">
    2024  © Anthony |  <a
      href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
  </div>
</footer>


<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-SVMJ2LPT6E', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

<script>
  feather.replace()
</script></div>
    </body>
</html>
